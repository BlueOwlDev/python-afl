language: python
python:
- "2.6"
- "2.7"
- "3.2"
- "3.3"
- "3.4"
- nightly
cache:
  directories:
  - $HOME/.cache
install:
- mkdir deps
- wget http://lcamtuf.coredump.cx/afl/releases/afl-latest.tgz -O deps/afl.tar.gz
- tar -xvzf deps/afl.tar.gz -C deps/
- make -C deps/afl-*/ install PREFIX="$PWD/deps"
- pip install --upgrade pip
- pip install --verbose cython
- pip install docutils
script:
- python setup.py install
- export PATH="$PWD/deps/bin:$PATH"
- echo 0 | afl-showmap -q -o out0 python test.py
- echo 1 | afl-showmap -q -o out1 python test.py
- '! diff -u out0 out1'
- find -name "*.rst" | xargs -L1 -t -I{} rst2xml.py --strict {} /dev/null

# vim:ts=2 sts=2 sw=2 et
